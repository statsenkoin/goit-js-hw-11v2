{"mappings":"AAAA,MAMMA,EAAqBC,SAASC,cAAc,2BAC5CC,EAAiBF,SAASC,cAAc,uBAE9CF,EAAmBI,iBAAiB,UAGpC,WACEC,QAAQC,IAAI,kCAAmCN,EAAmBO,SAClEP,EAAmBO,QACfC,EAASC,QAAQN,GACjBK,EAASE,UAAUP,E,IANzB,MAAMK,EAAW,IAAIG,sBASrB,SAAyBC,EAASC,GAChCD,EAAQE,SAAQC,MAAMC,IAKpBX,QAAQC,IAAI,4BAA6BU,EAAMC,eAAe,G,GAzB1C,CACtBC,KAAM,KACNC,WAAY,QACZC,UAAW,ICHb,MAAMC,EAAkBpB,SAASC,cAAc,yBAIhC,SAAAoB,IACb,OAAOD,EAAgBE,K,CAHzBF,EAAgBjB,iBAAiB,SAAUkB,GCF3C,MAGME,EAAS,IAAIC,gBAAgB,CACjCC,IAJc,qCAKdC,WAAY,QACZC,YAAa,aACbC,YAAY,IAUCd,eAAAe,EAA4BC,EAAOC,EAAMC,GACtD,IACE,MAAMC,QAAiBC,MACrB,8BAAiBJ,UAAcC,cAAiBC,KAAWT,KAE7D,aAAaU,EAASE,M,CACtB,MAAOC,GACP,OAAOhC,QAAQC,IAAI,aAAc+B,E,ECxBrC,MAAMC,EAAYrC,SAASC,cAAc,mBAE1B,SAAAqC,EAAuBP,EAAMQ,EAAOC,GACjD,IAAIC,EAAO,SAASV,KAAQQ,oBAAwBC,IACpDH,EAAUK,YAAcD,C,CCJ1B,MAAME,EAAU3C,SAASC,cAAc,eAExB,SAAA2C,EAAuBC,GACpC,IAAIC,EAASD,EAAKE,QAChB,CACEC,GACAC,aAAEA,EAAYC,cAAEA,EAAaC,KAAEA,EAAIC,MAAEA,EAAKC,MAAEA,EAAKC,SAAEA,EAAQC,UAAEA,KAErDP,EAAO,4CACJE,qEAGAD,uBACAE,2EAOb,IAEFR,EAAQa,mBAAmB,YAAaV,E,CClB3BhC,eAAA2C,EAA4BC,EAAW3B,EAAMC,GAC1D,IACE,MAAMa,QAAahB,EAAa6B,EAAW3B,EAAMC,IAC3C2B,KAAEA,EAAInB,MAAEA,GAAUK,EAGxBP,EAAcP,EAFA6B,KAAKC,KAAKrB,EAAQR,GAELQ,GAC3BI,EAAce,E,CACd,MACAvD,QAAQC,IAAI,aAAc+B,M,ECPXpC,SAASC,cAAc,gBAC/BE,iBAAiB,UAQ5BW,eAA4BgD,GAC1BA,EAAMC,iBACNC,EAAU3C,IAIV4C,EAAYH,EAAMI,cAAcC,SAASC,YAAY9C,MAAM+C,aAErDZ,EAAaQ,EAAWK,EAAMN,GACpCM,GAAQ,C,IAfV,IAAIL,EAAY,GACZK,EAAO,EAEPN,EAAU","sources":["src/js/intersection-observer.js","src/js/set-search-options.js","src/js/fetch-pixabay.js","src/js/update-img-info.js","src/js/markup-gallery.js","src/js/create-markup.js","src/index.js"],"sourcesContent":["const observerOptions = {\n  root: null,\n  rootMargin: '500px',\n  threshold: 1.0,\n};\n\nconst paginationCheckbox = document.querySelector('.js-checkbox-pagination');\nconst observerTarget = document.querySelector('.js-observer-target');\n\npaginationCheckbox.addEventListener('change', setInfinityLoad);\nconst observer = new IntersectionObserver(handleIntersect, observerOptions);\n\nfunction setInfinityLoad() {\n  console.log('paginationCheckbox.checked :>> ', paginationCheckbox.checked);\n  paginationCheckbox.checked\n    ? observer.observe(observerTarget)\n    : observer.unobserve(observerTarget);\n}\n\nfunction handleIntersect(entries, observer) {\n  entries.forEach(async entry => {\n    //  if (entry.isIntersecting && userInput) await onLoadGallery();\n    //  if (pages < page) {\n    //    observer.unobserve(observerTarget);\n    //  }\n    console.log('entry.isIntersecting :>> ', entry.isIntersecting);\n  });\n}\n","const perPageSelector = document.querySelector('.js-per-page-selector');\n\nperPageSelector.addEventListener('change', getImagePerPage);\n\nexport default function getImagePerPage() {\n  return perPageSelector.value;\n}\n","const API_KEY = '32468715-2ee7d1cef437ed65ce73ff92a';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst params = new URLSearchParams({\n  key: API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n});\n\n/**\n *\n * @param {String} query - userInput\n * @param {Number} page - requested page\n * @param {Number} perPage - number of requested objects\n * @returns array of objects or error message\n */\nexport default async function fetchPixabay(query, page, perPage) {\n  try {\n    const responce = await fetch(\n      `${BASE_URL}?q=${query}&page=${page}&per_page=${perPage}&${params}`\n    );\n    return await responce.json();\n  } catch (error) {\n    return console.log('error :>> ', error);\n  }\n}\n\n// export default function fetchPixabay(query, page, perPage) {\n//   return fetch(\n//     `${BASE_URL}?q=${query}&page=${page}&per_page=${perPage}&${params}`\n//   )\n//     .then(responce => {\n//       if (!responce.ok) {\n//         throw new Error(responce.status);\n//       }\n//       return responce.json();\n//     })\n//     .catch(error => console.log('error :>> ', error));\n// }\n","const imageInfo = document.querySelector('.js-images-info');\n\nexport default function updateImgInfo(page, pages, total) {\n  let info = `Page: ${page}/${pages}. Total images: ${total}`;\n  imageInfo.textContent = info;\n}\n","const gallery = document.querySelector('.js-gallery');\n\nexport default function markupGallery(data) {\n  let markup = data.reduce(\n    (\n      acc,\n      { webformatURL, largeImageURL, tags, likes, views, comments, downloads }\n    ) => {\n      return (acc += `<div class=\"photo-card\">\n      <a href=\"${largeImageURL}\">\n        <img \n          class=\"card-image\" \n          src=\"${webformatURL}\" \n          alt=\"${tags}\" \n          loading=\"lazy\"\n        />\n      </a>\n    </div>\n    `);\n    },\n    ``\n  );\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import fetchPixabay from './fetch-pixabay';\nimport updateImgInfo from './update-img-info';\nimport markupGallery from './markup-gallery';\n\nexport default async function createMarkup(userInput, page, perPage) {\n  try {\n    const data = await fetchPixabay(userInput, page, perPage);\n    const { hits, total } = data;\n    const pages = Math.ceil(total / perPage);\n\n    updateImgInfo(page, pages, total);\n    markupGallery(hits);\n  } catch {\n    console.log('error :>> ', error);\n  }\n}\n","import './js/intersection-observer';\n// import { setInfinityLoad } from './js/intersection-observer';\n\nimport getImagePerPage from './js/set-search-options';\nimport createMarkup from './js/create-markup';\n\nconst searchForm = document.querySelector('#search-form');\nsearchForm.addEventListener('submit', onFormSubmit);\n\nlet userInput = '';\nlet page = 1;\n// let pages = 1;\nlet perPage = 24;\n// let isInfinityLoad = false;\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  perPage = getImagePerPage();\n  // isInfinityLoad = setInfinityLoad();\n  // setInfinityLoad();\n\n  userInput = event.currentTarget.elements.searchQuery.value.trim();\n\n  await createMarkup(userInput, page, perPage);\n  page += 1;\n}\n"],"names":["$2de6fd0ac2d5c0f8$var$paginationCheckbox","document","querySelector","$2de6fd0ac2d5c0f8$var$observerTarget","addEventListener","console","log","checked","$2de6fd0ac2d5c0f8$var$observer","observe","unobserve","IntersectionObserver","entries","observer","forEach","async","entry","isIntersecting","root","rootMargin","threshold","$1b23d5a488958f95$var$perPageSelector","$1b23d5a488958f95$export$2e2bcd8739ae039","value","$dbc96ee058a4a6d7$var$params","URLSearchParams","key","image_type","orientation","safesearch","$dbc96ee058a4a6d7$export$2e2bcd8739ae039","query","page","perPage","responce","fetch","json","error","$b73d1dc69cf83bdc$var$imageInfo","$b73d1dc69cf83bdc$export$2e2bcd8739ae039","pages","total","info","textContent","$29ccc077861b16e9$var$gallery","$29ccc077861b16e9$export$2e2bcd8739ae039","data","markup","reduce","acc","webformatURL","largeImageURL","tags","likes","views","comments","downloads","insertAdjacentHTML","$e91f9a2c1ec35283$export$2e2bcd8739ae039","userInput","hits","Math","ceil","event","preventDefault","$1f0dc3b9307be026$var$perPage","$1f0dc3b9307be026$var$userInput","currentTarget","elements","searchQuery","trim","$1f0dc3b9307be026$var$page"],"version":3,"file":"index.c524ff3b.js.map"}